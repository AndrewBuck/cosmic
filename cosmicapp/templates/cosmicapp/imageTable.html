<script>
$(document).ready(function()
{
    gallery_{{galleryName}} = new ImageGallery('{{galleryName}}', '{{queryParams}}', '{{displayType}}',
        {{includeLinks}}, '{{imageOnclickFunction}}', '{{thumbnailSize}}');
    gallery_{{galleryName}}.initImageGallery();
});
</script>

<div id=imageGalleryQueryDiv>
    <div id="gallery_{{galleryName}}_top_div"></div>
    <p>
    Query Parameters:
    <span id={{galleryName}}_saveQueryLink>
        (<a class=functionLink onclick="gallery_{{galleryName}}.saveQuery()">Save query</a>)
    </span>
    </p>

    <div id={{galleryName}}_saveQueryDiv hidden>
        <table>
            <tr>
                <td>Name:<br>(optional)</td>
                <td><input type=text name={{galleryName}}_queryName value="{{query.name|default_if_none:""}}"></td>
            </tr>
            <tr>
                <td>Header:<br>(optional)</td>
                <td><input type=text name={{galleryName}}_queryHeaderText value="{{query.header|default_if_none:""}}"></td>
            </tr>
            <tr>
                <td>Text/Instructions:<br>(optional)<br><br>You can use markdown<br>text in this box to
                    leave<br>notes for yourself or for<br>others who you share the<br>query with.</td>
                <td><textarea rows=10 cols=50 name={{galleryName}}_queryText>{{query.text.markdownText|default_if_none:""}}</textarea></td>
            </tr>
            <tr>
                <td colspan=2>
                <input type=button class=button onclick="gallery_{{galleryName}}.saveQuerySubmit()" value=Save>
                <input type=button class=button onclick="gallery_{{galleryName}}.saveQueryCancel()" value=Cancel>
                </td>
            </tr>
        </table>
    </div>

    <div id=imageGalleryQueriesDiv class="{{galleryName}}"></div>

    <!-- TODO: Add functionality to set the limit and order of the returned results. (and maybe offset?) -->
    <br>
    <input type=button class="button {{galleryName}}" value="Query Help" onclick="gallery_{{galleryName}}.queryHelp()">
    <input type=button class="button {{galleryName}}" value="Add Query Filter" onclick="gallery_{{galleryName}}.addQueryParameter()">
    <input type=button class="button {{galleryName}}" value="Load More" onclick="gallery_{{galleryName}}.loadImageGalleryResults()">
    <input type=button class="button {{galleryName}}" value="Clear Results" onclick="gallery_{{galleryName}}.clearImageGalleryResults()">
</div>

<div id=imageGalleryDiv class="{{galleryName}}"></div>

<div class="clearfix"></div>

<div style="text-align:center;">
    <input id=loadMoreButton type=button class="button {{galleryName}}" value="Load more" onclick="gallery_{{galleryName}}.loadImageGalleryResults()">
</div>

